@* Views/Admin/Users.cshtml - List of supervisors and tutors *@
@model IEnumerable<ThesisManager.Models.User>
@{
    ViewData["Title"] = "قائمة المشرفين والمرشدين";
    Layout = "_Layout";
    var role = ViewBag.Role as string ?? "all";
}

<div class="content-container">
    <h2 style="color: var(--primary-blue); margin-bottom: 1.5rem;">
        <i class="fas fa-users"></i>
        المشرفون والمرشدون الأكاديميون
    </h2>

    <!-- Filter Tabs -->
    <div class="search-tabs" style="justify-content: flex-start; margin-bottom: 2rem;">
        <a href="@Url.Action("Users", new { role = "all" })" class="tab-btn @(role == "all" ? "active" : "")">
            الكل
        </a>
        <a href="@Url.Action("Users", new { role = "supervisor" })" class="tab-btn @(role == "supervisor" ? "active" : "")">
            المشرفون
        </a>
        <a href="@Url.Action("Users", new { role = "tutor" })" class="tab-btn @(role == "tutor" ? "active" : "")">
            المرشدون الأكاديميون
        </a>
    </div>

    <!-- Users Table -->
    <table class="data-table">
        <thead>
            <tr>
                <th>الاسم</th>
                <th>الدور</th>
                <th>البريد الإلكتروني</th>
                <th>الهاتف</th>
                <th>الحالة</th>
                <th>تاريخ الإضافة</th>
            </tr>
        </thead>
        <tbody>
            @foreach(var user in Model)
            {
                <tr class="clickable" onclick="location.href='@Url.Action("UserDetails", "Admin", new { id = user.Id })'">
                    <td style="font-weight: bold;">@user.FullName</td>
                    <td>
                        @if(user.Role == "supervisor")
                        {
                            <span class="status-badge" style="background: #dbeafe; color: #1e40af;">
                                <i class="fas fa-user-tie"></i> مشرف
                            </span>
                        }
                        else
                        {
                            <span class="status-badge" style="background: #d1fae5; color: #065f46;">
                                <i class="fas fa-chalkboard-teacher"></i> مرشد أكاديمي
                            </span>
                        }
                    </td>
                    <td>@user.Email</td>
                    <td>@user.Phone</td>
                    <td>
                        @if(user.IsActive)
                        {
                            <span class="status-badge status-active">
                                <i class="fas fa-check-circle"></i> نشط
                            </span>
                        }
                        else
                        {
                            <span class="status-badge" style="background: #fee2e2; color: #991b1b;">
                                <i class="fas fa-times-circle"></i> غير نشط
                            </span>
                        }
                    </td>
                    <td>@user.CreatedAt.ToString("yyyy-MM-dd")</td>
                </tr>
            }
        </tbody>
    </table>

    @if(!Model.Any())
    {
        <div class="text-center mt-4" style="padding: 3rem; color: #6b7280;">
            <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 1rem; color: var(--lightest-blue);"></i>
            <p style="font-size: 1.2rem;">لا يوجد مستخدمون</p>
        </div>
    }
</div>